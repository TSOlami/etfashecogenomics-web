<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ETfash Environmental Services - Advanced environmental monitoring and genomic analysis platform for comprehensive ecological insights">
    <meta name="keywords" content="environmental monitoring, genomic analytics, ETfash, bioinformatics, ecological research, environmental services">
    <meta name="author" content="ETfash Environmental Services">
    <title>ETfash Ecogenomics Suite - Environmental & Genomic Analytics Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link rel="icon" href="{% load static %}{% static 'images/favicon.ico' %}" type="image/x-icon">
    <link rel="shortcut icon" href="{% load static %}{% static 'images/favicon.ico' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% load static %}{% static 'css/styles.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-50">

<!-- Main Dashboard -->
<div id="mainDashboard">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="px-4 sm:px-6 py-4">
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                <div class="flex items-center space-x-3 sm:space-x-4">
                    <div class="etfash-logo flex-shrink-0">
                        <img src="{% static 'images/etfash-logo.jpeg' %}" alt="ETfash Environmental Services Logo" class="w-full h-full rounded-lg">
                    </div>
                    <div>
                        <div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2">
                            <span class="text-lg sm:text-xl md:text-2xl font-bold brand-text">EcoGenomics Suite</span>
                            <span class="text-xs bg-emerald-100 text-emerald-800 px-2 py-1 rounded-full w-fit">Professional Edition</span>
                        </div>
                        <p class="text-xs sm:text-sm text-gray-600">Environmental & Genomic Analytics Platform</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3 sm:space-x-4 w-full sm:w-auto justify-between sm:justify-end">
                    <div class="text-left sm:text-right">
                        <span class="text-xs sm:text-sm text-gray-600">Welcome, <span class="font-medium text-emerald-700">{{ user.username|title }}</span></span>
                        <p class="text-xs text-gray-500">EcoGenomics Suite User</p>
                    </div>
                    <a href="{% url 'logout' %}" class="text-xs sm:text-sm text-red-600 hover:text-red-800 transition-colors flex items-center">
                        <i class="fas fa-sign-out-alt mr-1"></i><span class="hidden sm:inline">Logout</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="bg-white border-b border-gray-200 px-2 sm:px-4 md:px-6">
        <div class="flex space-x-1 sm:space-x-4 md:space-x-8 overflow-x-auto">
            <button onclick="showTab('overview', event)" class="tab-btn active py-3 sm:py-4 px-2 sm:px-4 border-b-2 border-emerald-500 text-emerald-600 font-medium whitespace-nowrap">
                <i class="fas fa-tachometer-alt mr-1 sm:mr-2"></i><span class="hidden sm:inline">Dashboard </span>Overview
            </button>
            <button onclick="showTab('environmental', event)" class="tab-btn py-3 sm:py-4 px-2 sm:px-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                <i class="fas fa-globe mr-1 sm:mr-2"></i><span class="hidden sm:inline">Environmental </span>Monitoring
            </button>
            <button onclick="showTab('bioinformatics', event)" class="tab-btn py-3 sm:py-4 px-2 sm:px-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                <i class="fas fa-dna mr-1 sm:mr-2"></i><span class="hidden sm:inline">Genomic </span>Analytics
            </button>
            <button onclick="showTab('analytics', event)" class="tab-btn py-3 sm:py-4 px-2 sm:px-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                <i class="fas fa-chart-line mr-1 sm:mr-2"></i><span class="hidden sm:inline">Advanced </span>Analytics
            </button>
            <button onclick="showTab('reports', event)" class="tab-btn py-3 sm:py-4 px-2 sm:px-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap">
                <i class="fas fa-file-alt mr-1 sm:mr-2"></i>Reports<span class="hidden sm:inline"> & Export</span>
            </button>
        </div>
    </nav>

    <!-- Overview Tab -->
    <div id="overview" class="tab-content p-4 sm:p-6">
        <!-- EcoGenomics Suite Branding Header -->
        <div class="bg-gradient-to-r from-emerald-500 to-cyan-500 rounded-xl p-4 sm:p-6 mb-6 sm:mb-8">
            <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                <div>
                    <div class="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 mb-3">
                        <div class="etfash-logo bg-white bg-opacity-20 flex-shrink-0">
                            <img src="{% static 'images/etfash-logo.jpeg' %}" alt="ETfash Environmental Services Logo" class="w-full h-full rounded-lg">
                        </div>
                        <div>
                            <h3 class="text-2xl sm:text-3xl font-bold brand-text">EcoGenomics Suite Dashboard</h3>
                        </div>
                    </div>
                    <p class="text-emerald-100 text-sm sm:text-base">Comprehensive environmental monitoring with molecular insights</p>
                    <p class="text-xs sm:text-sm text-emerald-200 mt-1">Real-time data • Genomic analysis • Regulatory compliance</p>
                </div>
                <div class="text-center sm:text-right">
                    <div class="text-2xl sm:text-3xl font-bold text-emerald-200">24/7</div>
                    <div class="text-xs sm:text-sm text-emerald-200">Monitoring Active</div>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8">
            <!-- KPI Cards with Real Data -->
            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6 border-l-4 border-l-red-500">
                <div class="flex items-center">
                    <div class="p-2 sm:p-3 rounded-full bg-red-100 text-red-600 flex-shrink-0">
                        <i class="fas fa-wind text-lg sm:text-xl"></i>
                    </div>
                    <div class="ml-3 sm:ml-4 min-w-0">
                        <p class="text-xs sm:text-sm font-medium text-gray-600 truncate">Air Quality Index</p>
                        <p class="text-xl sm:text-2xl font-bold text-gray-900">{{ environmental_data.air_quality.value|floatformat:0 }}</p>
                        <p class="text-xs sm:text-sm text-red-600 font-medium">{{ environmental_data.air_quality.description }}</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6 border-l-4 border-l-emerald-500">
                <div class="flex items-center">
                    <div class="p-2 sm:p-3 rounded-full bg-emerald-100 text-emerald-600 flex-shrink-0">
                        <i class="fas fa-tint text-lg sm:text-xl"></i>
                    </div>
                    <div class="ml-3 sm:ml-4 min-w-0">
                        <p class="text-xs sm:text-sm font-medium text-gray-600 truncate">Temperature</p>
                        <p class="text-xl sm:text-2xl font-bold text-gray-900">{{ environmental_data.temperature.value|floatformat:1 }}°C</p>
                        <p class="text-xs sm:text-sm text-emerald-600 font-medium">{{ environmental_data.temperature.status|title }}</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6 border-l-4 border-l-yellow-500">
                <div class="flex items-center">
                    <div class="p-2 sm:p-3 rounded-full bg-yellow-100 text-yellow-600 flex-shrink-0">
                        <i class="fas fa-seedling text-lg sm:text-xl"></i>
                    </div>
                    <div class="ml-3 sm:ml-4 min-w-0">
                        <p class="text-xs sm:text-sm font-medium text-gray-600 truncate">pH Level</p>
                        <p class="text-xl sm:text-2xl font-bold text-gray-900">{{ environmental_data.ph_level.value|floatformat:1 }}</p>
                        <p class="text-xs sm:text-sm text-yellow-600 font-medium">{{ environmental_data.ph_level.status|title }}</p>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6 border-l-4 border-l-purple-500">
                <div class="flex items-center">
                    <div class="p-2 sm:p-3 rounded-full bg-purple-100 text-purple-600 flex-shrink-0">
                        <i class="fas fa-dna text-lg sm:text-xl"></i>
                    </div>
                    <div class="ml-3 sm:ml-4 min-w-0">
                        <p class="text-xs sm:text-sm font-medium text-gray-600 truncate">Genomic Studies</p>
                        <p class="text-xl sm:text-2xl font-bold text-gray-900">{{ genomic_data.total_samples }}</p>
                        <p class="text-xs sm:text-sm text-purple-600 font-medium">Active</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-time Charts -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-chart-line text-emerald-600 mr-2"></i>
                    <span class="truncate">Temperature Trends</span>
                </h3>
                <div class="chart-container">
                    <canvas id="temperatureChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4 flex items-center">
                    <i class="fas fa-fire text-cyan-600 mr-2"></i>
                    <span class="truncate">Pollution Levels</span>
                </h3>
                <div class="chart-container">
                    <canvas id="pollutionChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Environmental Monitoring Tab -->
    <div id="environmental" class="tab-content hidden p-4 sm:p-6">
        <div class="mb-4 sm:mb-6">
            <h2 class="text-xl sm:text-2xl font-bold brand-text mb-2">Environmental Monitoring</h2>
            <p class="text-sm sm:text-base text-gray-600">Comprehensive air, water, soil, and biological parameter monitoring</p>
        </div>

        <!-- Data Summary Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6 mb-6">
            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-database text-blue-600 mr-2"></i>Data Summary
                </h3>
                <div class="space-y-2">
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Total Samples:</span>
                        <span class="font-semibold">{{ environmental_data.total_samples }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Locations:</span>
                        <span class="font-semibold">{{ environmental_data.locations_monitored }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Violations:</span>
                        <span class="font-semibold text-red-600">{{ environmental_data.pollution_violations }}</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-chart-line text-emerald-600 mr-2"></i>Air Quality Trend
                </h3>
                <div class="chart-container">
                    <canvas id="airQualityChart"></canvas>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-cogs text-purple-600 mr-2"></i>Quick Analysis
                </h3>
                <div class="space-y-2">
                    <button onclick="runAnalysis('descriptive', 'environmental')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        Descriptive Statistics
                    </button>
                    <button onclick="runAnalysis('pollution_assessment', 'environmental')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        Pollution Assessment
                    </button>
                    <button onclick="runAnalysis('correlation', 'environmental')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        Correlation Analysis
                    </button>
                </div>
                <div id="analysisStatus" class="mt-2 text-sm" style="display: none;"></div>
            </div>
        </div>

        <!-- Data Entry Section -->
        <div class="bg-white rounded-xl card-shadow p-6 mt-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4">
                <i class="fas fa-upload text-emerald-600 mr-2"></i>Environmental Data Upload
            </h3>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="border-2 border-dashed border-emerald-300 rounded-xl p-6 text-center bg-emerald-50">
                    <i class="fas fa-cloud-upload-alt text-4xl text-emerald-500 mb-4"></i>
                    <p class="text-gray-600 mb-2 font-medium">Environmental Data Files</p>
                    <p class="text-sm text-gray-500 mb-4">CSV, Excel, or Text files</p>
                    
                    <form id="uploadForm" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="file" id="fileInput" name="file" accept=".csv,.xlsx,.xls" class="hidden">
                        <input type="hidden" id="fileType" name="file_type" value="environmental">
                        <button type="button" onclick="document.getElementById('fileInput').click()" class="eco-button text-white px-6 py-2 rounded-lg hover:bg-emerald-700 mb-2">
                            Browse Files
                        </button>
                        <button type="submit" class="w-full bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">
                            Upload Data
                        </button>
                    </form>
                    
                    <div id="uploadProgress" class="mt-2 hidden">
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="bg-emerald-600 h-2 rounded-full animate-pulse" style="width: 100%"></div>
                        </div>
                    </div>
                    <div id="uploadStatus" class="mt-2 text-sm" style="display: none;"></div>
                </div>
                
                <div class="border-2 border-dashed border-cyan-300 rounded-xl p-6 text-center bg-cyan-50">
                    <i class="fas fa-download text-4xl text-cyan-500 mb-4"></i>
                    <p class="text-gray-600 mb-2 font-medium">Download Templates</p>
                    <p class="text-sm text-gray-500 mb-4">Get started with our data templates</p>
                    <div class="space-y-2">
                        <button onclick="downloadTemplate('environmental')" class="w-full bg-gradient-to-r from-cyan-500 to-cyan-600 text-white px-6 py-2 rounded-lg hover:from-cyan-600 hover:to-cyan-700">
                            Environmental Template
                        </button>
                        <button onclick="downloadTemplate('genomic')" class="w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white px-6 py-2 rounded-lg hover:from-purple-600 hover:to-purple-700">
                            Genomic Template
                        </button>
                        <button onclick="downloadTemplate('biodiversity')" class="w-full bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-2 rounded-lg hover:from-green-600 hover:to-green-700">
                            Biodiversity Template
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis Results -->
        <div id="analysisResults"></div>
    </div>

    <!-- Bioinformatics Tab -->
    <div id="bioinformatics" class="tab-content hidden p-4 sm:p-6">
        <div class="mb-4 sm:mb-6">
            <h2 class="text-xl sm:text-2xl font-bold brand-text mb-2">Genomic Analytics Suite</h2>
            <p class="text-sm sm:text-base text-gray-600">Advanced bioinformatics tools for genomic and proteomic analysis</p>
        </div>

        <!-- Genomic Data Summary -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-6">
            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-dna text-blue-600 mr-2"></i>Genomic Data Summary
                </h3>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Total Samples:</span>
                        <span class="font-semibold">{{ genomic_data.total_samples }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Species Diversity:</span>
                        <span class="font-semibold">{{ genomic_data.species_diversity }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Mutations Detected:</span>
                        <span class="font-semibold text-red-600">{{ genomic_data.mutations_detected }}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Analysis Completion:</span>
                        <span class="font-semibold text-emerald-600">{{ genomic_data.analysis_completion|floatformat:1 }}%</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-chart-scatter text-purple-600 mr-2"></i>Mutation Analysis
                </h3>
                <div class="chart-container">
                    <canvas id="mutationChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Genomic Analysis Tools -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-microscope text-emerald-600 mr-2"></i>Sample Analysis
                </h3>
                <div class="space-y-2">
                    <button onclick="runAnalysis('sample_summary', 'genomic')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        Sample Summary
                    </button>
                    <button onclick="runAnalysis('mutation_analysis', 'genomic')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        Mutation Analysis
                    </button>
                    <button onclick="runAnalysis('distance_correlation', 'genomic')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        Distance Correlation
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-align-left text-orange-600 mr-2"></i>Sequence Tools
                </h3>
                <div class="space-y-2">
                    <button class="w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2 rounded-lg text-sm">
                        Sequence Alignment
                    </button>
                    <button class="w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2 rounded-lg text-sm">
                        Phylogenetic Analysis
                    </button>
                    <button class="w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-2 rounded-lg text-sm">
                        Gene Expression
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-cube text-red-600 mr-2"></i>Structure Analysis
                </h3>
                <div class="space-y-2">
                    <button class="w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-2 rounded-lg text-sm">
                        Protein Modeling
                    </button>
                    <button class="w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-2 rounded-lg text-sm">
                        Structure Prediction
                    </button>
                    <button class="w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-2 rounded-lg text-sm">
                        Molecular Dynamics
                    </button>
                </div>
            </div>
        </div>

        <!-- Gene Expression Heatmap -->
        <div class="bg-white rounded-xl card-shadow p-4 sm:p-6 mt-6">
            <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">Gene Expression Heatmap</h3>
            <div id="geneHeatmap" class="grid grid-cols-5 gap-1 h-48 sm:h-64">
                <!-- Gene expression heatmap cells will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Analytics Tab -->
    <div id="analytics" class="tab-content hidden p-4 sm:p-6">
        <div class="mb-4 sm:mb-6">
            <h2 class="text-xl sm:text-2xl font-bold brand-text mb-2">Advanced Analytics</h2>
            <p class="text-sm sm:text-base text-gray-600">Comprehensive data analysis and visualization tools</p>
        </div>

        <!-- Biodiversity Heatmap -->
        <div class="bg-white rounded-xl card-shadow p-4 sm:p-6 mb-6">
            <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                <i class="fas fa-map text-emerald-600 mr-2"></i>Biodiversity Distribution Heatmap
            </h3>
            <div id="heatmap-container" class="flex flex-col gap-1">
                <!-- Heatmap will be populated by JavaScript -->
            </div>
            <div class="mt-4 flex items-center justify-center gap-4 text-xs text-gray-600">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-blue-200 rounded mr-2"></div>
                    <span>Low Diversity</span>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-blue-400 rounded mr-2"></div>
                    <span>Medium Diversity</span>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-blue-600 rounded mr-2"></div>
                    <span>High Diversity</span>
                </div>
            </div>
        </div>

        <!-- Statistical Analysis Tools -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-calculator text-blue-600 mr-2"></i>Statistical Tests
                </h3>
                <div class="space-y-2">
                    <button onclick="runAnalysis('ttest', 'environmental')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        T-Test Analysis
                    </button>
                    <button onclick="runAnalysis('anova', 'environmental')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        ANOVA Analysis
                    </button>
                    <button onclick="runAnalysis('regression', 'environmental')" class="w-full eco-button text-white py-2 rounded-lg text-sm">
                        Regression Analysis
                    </button>
                </div>
            </div>

            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-chart-bar text-purple-600 mr-2"></i>Data Visualization
                </h3>
                <div class="space-y-2">
                    <button onclick="generateVisualization('scatter')" class="w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-2 rounded-lg text-sm">
                        Scatter Plot
                    </button>
                    <button onclick="generateVisualization('heatmap')" class="w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-2 rounded-lg text-sm">
                        Correlation Heatmap
                    </button>
                    <button onclick="generateVisualization('time_series')" class="w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-2 rounded-lg text-sm">
                        Time Series Plot
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Reports Tab -->
    <div id="reports" class="tab-content hidden p-4 sm:p-6">
        <div class="mb-4 sm:mb-6">
            <h2 class="text-xl sm:text-2xl font-bold brand-text mb-2">Reports & Export</h2>
            <p class="text-sm sm:text-base text-gray-600">Generate professional reports and export data in multiple formats</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
            <!-- Report Generation -->
            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-file-alt text-emerald-600 mr-2"></i>Generate Reports
                </h3>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Report Type</label>
                        <select id="reportType" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-emerald-500 focus:border-emerald-500">
                            <option value="environmental">Environmental Assessment</option>
                            <option value="genomic">Genomic Analysis</option>
                            <option value="biodiversity">Biodiversity Assessment</option>
                            <option value="comprehensive">Comprehensive Report</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Output Format</label>
                        <select id="reportFormat" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-emerald-500 focus:border-emerald-500">
                            <option value="pdf">PDF Document</option>
                            <option value="html">HTML Report</option>
                            <option value="docx">Word Document</option>
                            <option value="xlsx">Excel Spreadsheet</option>
                        </select>
                    </div>
                    <button onclick="generateReport()" class="w-full eco-button text-white py-3 rounded-lg font-medium">
                        Generate Report
                    </button>
                    <div id="reportStatus" class="text-sm" style="display: none;"></div>
                </div>
            </div>

            <!-- Export Options -->
            <div class="bg-white rounded-xl card-shadow p-4 sm:p-6">
                <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                    <i class="fas fa-download text-blue-600 mr-2"></i>Data Export
                </h3>
                <div class="space-y-2">
                    <button class="w-full flex items-center justify-center px-4 py-3 eco-button text-white rounded-lg font-medium text-sm">
                        <i class="fas fa-file-csv mr-2"></i>Export as CSV
                    </button>
                    <button class="w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 font-medium text-sm">
                        <i class="fas fa-file-excel mr-2"></i>Export as Excel
                    </button>
                    <button class="w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:from-red-600 hover:to-red-700 font-medium text-sm">
                        <i class="fas fa-file-pdf mr-2"></i>Export as PDF
                    </button>
                </div>
            </div>
        </div>

        <!-- Recent Reports -->
        <div class="bg-white rounded-xl card-shadow p-4 sm:p-6 mt-6">
            <h3 class="text-base sm:text-lg font-bold text-gray-800 mb-4">
                <i class="fas fa-history text-gray-600 mr-2"></i>Recent Reports
            </h3>
            <div class="space-y-2">
                {% for report in recent_reports %}
                <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                    <div>
                        <h4 class="font-medium text-gray-800">{{ report.title }}</h4>
                        <p class="text-sm text-gray-600">{{ report.created_at|date:"M d, Y H:i" }}</p>
                    </div>
                    <div class="flex items-center space-x-2">
                        <span class="text-xs bg-emerald-100 text-emerald-800 px-2 py-1 rounded">{{ report.output_format|upper }}</span>
                        <button class="text-emerald-600 hover:text-emerald-800">
                            <i class="fas fa-download"></i>
                        </button>
                    </div>
                </div>
                {% empty %}
                <p class="text-gray-500 text-center py-4">No reports generated yet. Create your first report above!</p>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- JavaScript Variables -->
<script>
// Pass data from Django to JavaScript
const chartData = {{ chart_data|safe }};
const heatmapData = {{ heatmap_data|safe }};
const hasEnvironmentalData = {{ environmental_data.total_samples }} > 0;
const hasGenomicData = {{ genomic_data.total_samples }} > 0;
const hasBiodiversityData = {{ biodiversity_data.total_species }} > 0;
</script>

<!-- Custom JavaScript -->
<script src="{% load static %}{% static 'js/main.js' %}"></script>

</body>
</html>